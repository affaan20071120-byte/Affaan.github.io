<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gold Neon Calculator</title>
<style>
  body {
    background: #4B0082; /* keep your purple background */
    color: #FFD700;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .calculator {
    background: rgba(20, 20, 20, 0.9);
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 0 20px #FFD700, 0 0 40px #FFD700 inset;
    width: 360px;
  }
  #display {
    font-size: 2rem;
    color: #FFD700;
    text-shadow: 0 0 8px #FFD700, 0 0 12px #FFD700, 0 0 20px #FFD700;
    padding: 12px;
    border-radius: 12px;
    background: rgba(0,0,0,0.6);
    min-height: 55px;
    text-align: right;
    overflow-x: auto;
    margin-bottom: 12px;
    border: 2px solid #FFD700;
    box-shadow: 0 0 10px #FFD700, 0 0 20px #FFD700, 0 0 40px #FFD700 inset;
  }
  #keys {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
  }
  button {
    font-size: 1.1rem;
    padding: 12px;
    border: none;
    border-radius: 10px;
    background: rgba(255, 215, 0, 0.15);
    color: #FFD700;
    cursor: pointer;
    text-shadow: 0 0 6px #FFD700;
    box-shadow: 0 0 10px #FFD700, 0 0 15px #FFD700 inset;
    transition: 0.2s;
  }
  button:hover {
    background: rgba(255, 215, 0, 0.3);
    transform: scale(1.05);
    box-shadow: 0 0 15px #FFD700, 0 0 30px #FFD700 inset;
  }
  .wide { grid-column: span 2; }
  .equals { background: rgba(255, 215, 0, 0.4); }
</style>
</head>
<body>
  <div class="calculator">
    <div id="display"></div>
    <div id="keys"></div>
  </div>

<script>
const keyList = [
  '7','8','9','(',')',
  '4','5','6','^','√',
  '1','2','3','×','÷',
  '0','.','+','-','=', 
  'sin','cos','tan','log','ln',
  'π','e','x²','1/x','%',
  'C','DEL','ANS','EXP','±'
];

const keysContainer = document.getElementById('keys');
function createKey(label){
  const b=document.createElement('button');
  b.type='button';
  b.textContent=label;
  if(label==='='||label==='C'||label==='DEL') b.classList.add('wide');
  if(label==='=') b.classList.add('equals');
  b.addEventListener('click',()=>press(label));
  return b;
}
keyList.forEach(l=>keysContainer.appendChild(createKey(l)));

const display=document.getElementById('display');
let memoryAns=0;

function appendToDisplay(txt){ display.textContent+=txt; }

function toJS(expr){
  expr=expr.replace(/([0-9]+(?:\.[0-9]+)?)\s*π/g,"($1*Math.PI)");
  expr=expr.replace(/π/g,"Math.PI");
  expr=expr.replace(/√\(/g,"Math.sqrt(");
  expr=expr.replace(/\^/g,"**");
  expr=expr.replace(/sin\(/g,"Math.sin(Math.PI/180*");
  expr=expr.replace(/cos\(/g,"Math.cos(Math.PI/180*");
  expr=expr.replace(/tan\(/g,"Math.tan(Math.PI/180*");
  expr=expr.replace(/log\(/g,"Math.log10(");
  expr=expr.replace(/ln\(/g,"Math.log(");
  expr=expr.replace(/%/g,"/100");
  return expr;
}

function formatNumber(n){
  if(!isFinite(n)) return "Error";
  const s=Number(n).toPrecision(12);
  return /[eE]/.test(s)?s:parseFloat(s).toString();
}

function evaluate(){
  const txt=display.textContent.trim();
  if(!txt) return;
  try{
    const js=toJS(txt);
    const val=Function("return ("+js+")")();
    display.textContent=formatNumber(val);
    memoryAns=val;
  }catch(e){ display.textContent="Error"; }
}

function press(key){
  if(key==='C'){ display.textContent=''; return; }
  if(key==='DEL'){ display.textContent=display.textContent.slice(0,-1); return; }
  if(key==='ANS'){ display.textContent+=String(memoryAns); return; }
  if(key==='π'){ display.textContent+='π'; return; }
  if(key==='e'){ display.textContent+='e'; return; }
  if(key==='x²'){ display.textContent+='^2'; return; }
  if(key==='1/x'){ display.textContent+='^-1'; return; }
  if(key==='EXP'){ display.textContent+='e^'; return; }
  if(key==='±'){ toggleSign(); return; }
  if(['sin','cos','tan','log','ln','√'].includes(key)){
    if(key==='√') display.textContent+='√('; else display.textContent+=key+'(';
    return;
  }
  if(key==='×'){ display.textContent+='*'; return; }
  if(key==='÷'){ display.textContent+='/'; return; }
  if(key==='='){ evaluate(); return; }
  display.textContent+=key;
}

function toggleSign(){
  const s=display.textContent;
  const m=s.match(/(-?\d*\.?\d+)(?!.*\d)/);
  if(!m){ display.textContent+='-'; return; }
  const start=m.index;
  const end=start+m[0].length;
  const before=s.slice(0,start);
  const num=m[0];
  const after=s.slice(end);
  const toggled=num.startsWith('-')?num.slice(1):'-'+num;
  display.textContent=before+toggled+after;
}

// --- Add keyboard input ---
document.addEventListener('keydown', (e)=>{
  const key=e.key;
  if(/[0-9]/.test(key)) press(key);
  else if(key==='.') press('.');
  else if(key==='+'||key==='-'||key==='*'||key==='/'||key==='^') press(key);
  else if(key==='Enter') press('=');
  else if(key==='Backspace') press('DEL');
  else if(key==='Escape') press('C');
});
</script>
</body>
</html>
